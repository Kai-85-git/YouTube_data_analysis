<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Channel Analyzer</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Suppress browser extension errors globally
        window.addEventListener('error', function(event) {
            if (event.message && (
                event.message.includes('message port closed') ||
                event.message.includes('Extension context invalidated') ||
                event.message.includes('runtime.lastError')
            )) {
                event.preventDefault();
                return false;
            }
        });

        // Suppress unhandled promise rejections from extensions
        window.addEventListener('unhandledrejection', function(event) {
            if (event.reason && event.reason.message && (
                event.reason.message.includes('message port closed') ||
                event.reason.message.includes('Extension context invalidated')
            )) {
                event.preventDefault();
                return false;
            }
        });
    </script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fab fa-youtube"></i>
                    <h1>YouTube Analyzer</h1>
                </div>
                <div class="header-subtitle">
                    ãƒãƒ£ãƒ³ãƒãƒ«ã®è©³ç´°åˆ†æãƒ„ãƒ¼ãƒ«
                </div>
            </div>
            <div class="header-bg"></div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Search Section -->
            <section class="search-section">
                <div class="search-container">
                    <h2>ãƒãƒ£ãƒ³ãƒãƒ«ã‚’åˆ†æã™ã‚‹</h2>
                    <p>YouTubeãƒãƒ£ãƒ³ãƒãƒ«ã®URLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
                    
                    <form class="search-form" id="analyzeForm">
                        <div class="input-group">
                            <div class="input-wrapper">
                                <i class="fas fa-link input-icon"></i>
                                <input 
                                    type="url" 
                                    id="channelUrl" 
                                    placeholder="https://www.youtube.com/@channel-name" 
                                    required
                                    class="url-input"
                                >
                            </div>
                            <button type="submit" class="analyze-btn">
                                <i class="fas fa-search"></i>
                                <span>åˆ†æé–‹å§‹</span>
                            </button>
                        </div>
                    </form>

                    <div class="url-examples">
                        <p>å¯¾å¿œURLå½¢å¼:</p>
                        <ul>
                            <li>https://www.youtube.com/@username</li>
                            <li>https://www.youtube.com/channel/ID</li>
                            <li>https://www.youtube.com/c/channelname</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- Loading Section -->
            <section class="loading-section hidden" id="loadingSection">
                <div class="loading-container">
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                    </div>
                    <h3>ãƒãƒ£ãƒ³ãƒãƒ«ã‚’åˆ†æä¸­...</h3>
                    <p>ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã„ã¾ã™</p>
                </div>
            </section>

            <!-- Results Section -->
            <section class="results-section hidden" id="resultsSection">
                <div class="results-container">
                    <!-- Channel Header -->
                    <div class="channel-header">
                        <div class="channel-avatar">
                            <img id="channelThumbnail" src="" alt="Channel Avatar">
                        </div>
                        <div class="channel-info">
                            <h2 id="channelTitle"></h2>
                            <p class="channel-id" id="channelId"></p>
                            <p class="channel-created" id="channelCreated"></p>
                            <p class="channel-url" id="channelUrl"></p>
                        </div>
                    </div>

                    <!-- Statistics Cards -->
                    <div class="stats-grid">
                        <div class="stat-card subscribers">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-number" id="subscriberCount">0</div>
                                <div class="stat-label">ç™»éŒ²è€…æ•°</div>
                            </div>
                        </div>
                        
                        <div class="stat-card views">
                            <div class="stat-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-number" id="viewCount">0</div>
                                <div class="stat-label">ç·å†ç”Ÿå›æ•°</div>
                            </div>
                        </div>
                        
                        <div class="stat-card videos">
                            <div class="stat-icon">
                                <i class="fas fa-play"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-number" id="videoCount">0</div>
                                <div class="stat-label">å‹•ç”»æ•°</div>
                            </div>
                        </div>
                    </div>

                    <!-- Channel Description -->
                    <div class="description-card">
                        <h3><i class="fas fa-info-circle"></i> ãƒãƒ£ãƒ³ãƒãƒ«æ¦‚è¦</h3>
                        <p id="channelDescription"></p>
                    </div>

                    <!-- Analytics Dashboard -->
                    <div class="analytics-section">
                        <h3><i class="fas fa-chart-line"></i> è©³ç´°åˆ†æ</h3>
                        <div class="analytics-grid">
                            <div class="analytics-card">
                                <h4><i class="fas fa-chart-bar"></i> ç·åˆçµ±è¨ˆ</h4>
                                <div class="analytics-stats">
                                    <div class="analytics-stat">
                                        <span class="label">å¹³å‡å†ç”Ÿæ•°:</span>
                                        <span class="value" id="averageViews">-</span>
                                    </div>
                                    <div class="analytics-stat">
                                        <span class="label">ç·ã„ã„ã­æ•°:</span>
                                        <span class="value" id="totalLikes">-</span>
                                    </div>
                                    <div class="analytics-stat">
                                        <span class="label">ç·ã‚³ãƒ¡ãƒ³ãƒˆæ•°:</span>
                                        <span class="value" id="totalComments">-</span>
                                    </div>
                                    <div class="analytics-stat">
                                        <span class="label">äººæ°—æŠ•ç¨¿æ—¥:</span>
                                        <span class="value" id="popularDay">-</span>
                                    </div>
                                    <div class="analytics-stat">
                                        <span class="label">æŠ•ç¨¿é »åº¦:</span>
                                        <span class="value" id="uploadFrequency">-</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="analytics-card">
                                <h4><i class="fas fa-chart-pie"></i> ãƒãƒ£ãƒ³ãƒãƒ«æˆé•·æ¨ç§»</h4>
                                <div class="chart-container">
                                    <canvas id="growthChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Top Videos -->
                    <div class="top-videos-section">
                        <h3><i class="fas fa-trophy"></i> äººæ°—å‹•ç”» TOP10</h3>
                        <div class="top-videos-list" id="topVideosList">
                            <!-- Top videos will be populated here -->
                        </div>
                    </div>

                    <!-- Recent Videos -->
                    <div class="videos-section">
                        <h3><i class="fas fa-clock"></i> æœ€æ–°å‹•ç”»</h3>
                        <div class="videos-grid" id="videosGrid">
                            <!-- Video cards will be populated here -->
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <button class="btn btn-accent" id="analyzeCommentsBtn">
                            <i class="fas fa-comments"></i>
                            å‹•ç”»ã‚³ãƒ¡ãƒ³ãƒˆåˆ†æ
                        </button>
                        <button class="btn btn-ai" id="generateAIVideoIdeasBtn">
                            <i class="fas fa-lightbulb"></i>
                            AIå‹•ç”»ã‚¢ã‚¤ãƒ‡ã‚¢
                        </button>
                        <button class="btn btn-secondary" id="analyzeAnotherBtn">
                            <i class="fas fa-plus"></i>
                            åˆ¥ã®ãƒãƒ£ãƒ³ãƒãƒ«ã‚’åˆ†æ
                        </button>
                        <button class="btn btn-primary" id="exportDataBtn">
                            <i class="fas fa-download"></i>
                            ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
                        </button>
                    </div>
                </div>
            </section>

            <!-- Comments Analysis Section -->
            <section class="comments-section hidden" id="commentsSection">
                <div class="comments-container">
                    <div class="comments-header">
                        <h3><i class="fas fa-comments"></i> ã‚³ãƒ¡ãƒ³ãƒˆåˆ†æçµæœ</h3>
                        <button class="btn btn-secondary" id="backToResultsBtn">
                            <i class="fas fa-arrow-left"></i>
                            ãƒãƒ£ãƒ³ãƒãƒ«åˆ†æã«æˆ»ã‚‹
                        </button>
                    </div>
                    
                    <div class="comments-analysis-grid">
                        <div class="comments-stats-card">
                            <h4><i class="fas fa-chart-bar"></i> ã‚³ãƒ¡ãƒ³ãƒˆçµ±è¨ˆ</h4>
                            <div class="comments-stats">
                                <div class="stat-item">
                                    <span class="label">ç·ã‚³ãƒ¡ãƒ³ãƒˆæ•°:</span>
                                    <span class="value" id="totalCommentsAnalyzed">-</span>
                                </div>
                                <div class="stat-item">
                                    <span class="label">å¹³å‡ã„ã„ã­æ•°:</span>
                                    <span class="value" id="averageLikes">-</span>
                                </div>
                                <div class="stat-item">
                                    <span class="label">æœ€é«˜ã„ã„ã­æ•°:</span>
                                    <span class="value" id="maxLikes">-</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="top-comments-card">
                            <h4><i class="fas fa-thumbs-up"></i> äººæ°—ã‚³ãƒ¡ãƒ³ãƒˆ (ã„ã„ã­æ•°é †)</h4>
                            <div class="comments-list" id="topCommentsList">
                                <!-- Top comments will be populated here -->
                            </div>
                        </div>
                        
                        <div class="constructive-comments-card">
                            <h4><i class="fas fa-lightbulb"></i> å»ºè¨­çš„ãªã‚³ãƒ¡ãƒ³ãƒˆ</h4>
                            <div class="comments-list" id="constructiveCommentsList">
                                <!-- Constructive comments will be populated here -->
                            </div>
                        </div>
                        
                        <div class="improvement-comments-card">
                            <h4><i class="fas fa-wrench"></i> æ”¹å–„ææ¡ˆã‚³ãƒ¡ãƒ³ãƒˆ</h4>
                            <div class="comments-list" id="improvementCommentsList">
                                <!-- Improvement suggestions will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Content Ideas Section -->
            <section class="content-ideas-section hidden" id="contentIdeasSection">
                <div class="content-ideas-container">
                    <div class="content-ideas-header">
                        <h3><i class="fas fa-lightbulb"></i> ğŸ¯ æ¬¡ã®å‹•ç”»ã‚¢ã‚¤ãƒ‡ã‚¢</h3>
                        <button class="btn btn-secondary" id="backToResultsFromIdeasBtn">
                            <i class="fas fa-arrow-left"></i>
                            ãƒãƒ£ãƒ³ãƒãƒ«åˆ†æã«æˆ»ã‚‹
                        </button>
                    </div>
                    
                    <div id="content-ideas-container">
                        <!-- Content ideas will be populated here -->
                    </div>
                </div>
            </section>

            <!-- AI Video Analysis Section -->
            <section class="ai-analysis-section hidden" id="aiAnalysisSection">
                <div class="ai-analysis-container">
                    <div class="ai-analysis-header">
                        <h3><i class="fas fa-robot"></i> ğŸ¤– AIå‹•ç”»åˆ†æçµæœ</h3>
                        <button class="btn btn-secondary" id="backToResultsFromAIBtn">
                            <i class="fas fa-arrow-left"></i>
                            ãƒãƒ£ãƒ³ãƒãƒ«åˆ†æã«æˆ»ã‚‹
                        </button>
                    </div>
                    
                    <div class="ai-analysis-content">
                        <!-- Performance Metrics -->
                        <div class="analysis-card">
                            <h4><i class="fas fa-chart-bar"></i> ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™</h4>
                            <div id="performance-metrics">
                                <!-- Metrics will be populated here -->
                            </div>
                        </div>
                        
                        <!-- AI Analysis -->
                        <div class="analysis-card">
                            <h4><i class="fas fa-brain"></i> AIåˆ†æ</h4>
                            <div id="ai-analysis-text">
                                <!-- AI analysis will be populated here -->
                            </div>
                        </div>
                        
                        <!-- Video Recommendations -->
                        <div class="analysis-card">
                            <h4><i class="fas fa-lightbulb"></i> å‹•ç”»ã‚¢ã‚¤ãƒ‡ã‚¢ææ¡ˆ</h4>
                            <div id="video-ideas-container">
                                <!-- Video ideas will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Error Section -->
            <section class="error-section hidden" id="errorSection">
                <div class="error-container">
                    <div class="error-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h3>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h3>
                    <p id="errorMessage"></p>
                    <button class="btn btn-primary" id="retryBtn">
                        <i class="fas fa-redo"></i>
                        å†è©¦è¡Œ
                    </button>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2024 YouTube Channel Analyzer. Powered by YouTube Data API v3</p>
        </footer>
    </div>

    <script type="module" src="js/app.js"></script>
</body>
</html>